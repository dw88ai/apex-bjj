/**
 * YouTube Video Links Configuration
 * 
 * Centralized place to manage all video URLs in the app.
 * Update these URLs to point to specific videos instead of channels.
 */

// ============================================
// COACH YOUTUBE CHANNELS
// ============================================

export const COACH_CHANNELS = {
  LACHLAN_GILES: 'https://youtube.com/@LachlanGiles',
  GORDON_RYAN: 'https://youtube.com/@GordonRyanOfficial',
  JOHN_DANAHER: 'https://youtube.com/@JohnDanaher',
  BERNARDO_FARIA: 'https://youtube.com/@Bernardo_Faria',
  CRAIG_JONES: 'https://youtube.com/@CraigJonesOfficial',
  KEENAN_CORNELIUS: 'https://youtube.com/@KenanCornelius',
} as const;

// ============================================
// SIDE CONTROL ESCAPE VIDEOS
// ============================================

export const SIDE_CONTROL_VIDEOS = {
  week1: {
    url: 'https://youtube.com/watch?v=by85KB6wf8A',
    title: 'Lachlan Giles - 3 MUST-KNOW Side Control Escapes',
  },
  week2: {
    url: 'https://youtube.com/watch?v=GW0wLdv8VW8',
    title: 'Bernardo Faria - North South Escape',
  },
  week3: {
    url: 'https://youtube.com/watch?v=gnAhAdE_A90',
    title: 'Lachlan Giles - The Best Way to Escape Side Control',
  },
  week4: {
    url: 'https://youtube.com/watch?v=by85KB6wf8A&t=441s',
    title: 'Lachlan Giles - Sit-Up Escape from Side Control',
  },
} as const;

// ============================================
// MOUNT ESCAPE VIDEOS
// ============================================

export const MOUNT_ESCAPE_VIDEOS = {
  week1: {
    url: 'https://youtube.com/watch?v=EMEueexp9zU',
    title: 'John Danaher - How To Do The Perfect BJJ Mount Escape',
  },
  week2: {
    url: 'https://youtube.com/watch?v=lSAYNVWIbnA',
    title: 'Lachlan Giles - Escaping the Mount (Choosing the Escape)',
  },
  week3: {
    url: 'https://youtube.com/watch?v=Olqs4avtdhU',
    title: 'The Grapple Lab - Fundamental Mount Escapes Everyone Should Know',
  },
  week4: {
    url: 'https://youtube.com/watch?v=EMEueexp9zU&t=720s',
    title: 'John Danaher - Advanced Mount Escape Variations',
  },
} as const;

// ============================================
// BACK ESCAPE VIDEOS
// ============================================

export const BACK_ESCAPE_VIDEOS = {
  week1: {
    url: 'https://youtube.com/watch?v=9n6rcl-eLY8',
    title: 'John Danaher – Back System Concepts (Back Attack/Defense Ideas)',
  },
  week2: {
    url: 'https://youtube.com/watch?v=Nhca-P5Uj20',
    title: 'Lachlan Giles – Escaping Back Control (EBI / No Gi)',
  },
  week3: {
    url: 'https://youtube.com/watch?v=uT-7lJxykCg',
    title: 'Craig Jones – Back Escape Technique with Volkanovski',
  },
  week4: {
    url: 'https://youtube.com/watch?v=gQp4DKWjs1w',
    title: 'Craig Jones – Escapes Everything (Back Defense Highlights)',
  },
} as const;

// ============================================
// GUARD RETENTION VIDEOS
// ============================================

export const GUARD_RETENTION_VIDEOS = {
  week1: {
    url: 'https://youtube.com/watch?v=by85KB6wf8A',
    title: 'Lachlan Giles - Guard Retention Through Frames',
  },
  week2: {
    url: 'https://youtube.com/watch?v=ODuQCA88oY4',
    title: 'John Danaher - 5 Tips To Pass ANY Guard (Distance Management)',
  },
  week3: {
    url: 'https://youtube.com/watch?v=UTaZzbHMr-s',
    title: 'Keenan Cornelius - The 8 Layers of Guard Retention',
  },
  week4: {
    url: 'https://youtube.com/watch?v=1cKr7xJ-0i8',
    title: 'Keenan Cornelius - Late Guard Recovery Trick',
  },
} as const;

// ============================================
// CLOSED GUARD VIDEOS
// ============================================

export const CLOSED_GUARD_VIDEOS = {
  week1: {
    url: 'https://youtube.com/watch?v=ZKsfnBbBdjk',
    title: 'Breaking Posture in Closed Guard (The Complete Guide)',
  },
  week2: {
    url: 'https://youtube.com/watch?v=jFRuW1WUfyU',
    title: 'Bernardo Faria - Closed Guard: Breaking Posture and Armbar',
  },
  week3: {
    url: 'https://youtube.com/watch?v=ypi3ie6hKTI',
    title: 'John Danaher - Closed Guard Fundamentals',
  },
  week4: {
    url: 'https://youtube.com/watch?v=nU9YxDabnSU',
    title: 'Gordon Ryan - Understanding The Closed Guard',
  },
} as const;

// ============================================
// OPEN GUARD VIDEOS
// ============================================

export const OPEN_GUARD_VIDEOS = {
  week1: {
    url: 'https://youtube.com/watch?v=UTaZzbHMr-s',
    title: 'Keenan Cornelius - Open Guard Grips & Distance Control',
  },
  week2: {
    url: 'https://youtube.com/watch?v=cdMxuXC_x9s',
    title: 'Bernardo Faria - Easy and Effective Open Guard Sweep',
  },
  week3: {
    url: 'https://youtube.com/watch?v=f7A1vv0-A2U',
    title: 'Bernardo Faria - Basic X Guard Sweep',
  },
  week4: {
    url: 'https://youtube.com/watch?v=ABW1NHggF9Q',
    title: 'Jon Thomas - Lasso Guard Chair Sweep',
  },
} as const;

// ============================================
// HALF GUARD VIDEOS
// ============================================

export const HALF_GUARD_VIDEOS = {
  week1: {
    url: 'https://youtube.com/watch?v=zDD2ORNn_yw',
    title: 'Bernardo Faria - Pulling Deep Half Guard & Faria Sweep',
  },
  week2: {
    url: 'https://youtube.com/watch?v=pW2YL_n8Q_U',
    title: 'Lachlan Giles - The Main Sweep from Half Guard',
  },
  week3: {
    url: 'https://youtube.com/watch?v=-xQy1shvl7w',
    title: 'Craig Jones - Z Guard System',
  },
  week4: {
    url: 'https://youtube.com/watch?v=RQf5WZNLmEA',
    title: 'Gordon Ryan - Effective Half Guard Passing',
  },
} as const;

// ============================================
// HELPER FUNCTION: Get Video by Position & Week
// ============================================

export function getVideoForPosition(position: string, week: number) {
  const weekKey = `week${week}` as 'week1' | 'week2' | 'week3' | 'week4';
  
  switch (position) {
    case 'side_control':
      return SIDE_CONTROL_VIDEOS[weekKey];
    case 'mount':
      return MOUNT_ESCAPE_VIDEOS[weekKey];
    case 'back_control':
      return BACK_ESCAPE_VIDEOS[weekKey];
    case 'guard_retention':
      return GUARD_RETENTION_VIDEOS[weekKey];
    case 'closed_guard':
      return CLOSED_GUARD_VIDEOS[weekKey];
    case 'open_guard':
      return OPEN_GUARD_VIDEOS[weekKey];
    case 'half_guard':
      return HALF_GUARD_VIDEOS[weekKey];
    default:
      return SIDE_CONTROL_VIDEOS.week1; // fallback
  }
}

// ============================================
// HOW TO UPDATE VIDEOS
// ============================================

/**
 * UPDATING TO SPECIFIC YOUTUBE VIDEOS:
 * 
 * 1. Find the video on YouTube
 * 2. Copy the URL (should look like: https://youtube.com/watch?v=ABC123)
 * 3. Add timestamp if needed: https://youtube.com/watch?v=ABC123&t=125s
 * 4. Update the URL in the appropriate section above
 * 
 * Example:
 * week1: {
 *   url: 'https://youtube.com/watch?v=ktdBeFvGKG0',
 *   title: 'Lachlan Giles - Side Control Escape Fundamentals',
 * }
 * 
 * With timestamp (starts at 2:05):
 * week1: {
 *   url: 'https://youtube.com/watch?v=ktdBeFvGKG0&t=125s',
 *   title: 'Lachlan Giles - Side Control Escape Fundamentals',
 * }
 */

// ============================================
// UTILITY FUNCTIONS
// ============================================

/**
 * Extract YouTube video ID from various URL formats
 * 
 * Supports:
 * - youtube.com/watch?v=VIDEO_ID
 * - youtube.com/embed/VIDEO_ID
 * - youtu.be/VIDEO_ID
 * 
 * @param url - YouTube URL
 * @returns Video ID or null if not found
 */
export function extractVideoId(url: string): string | null {
  try {
    // Handle youtube.com/watch?v=VIDEO_ID
    const watchMatch = url.match(/[?&]v=([^&]+)/);
    if (watchMatch) return watchMatch[1];

    // Handle youtube.com/embed/VIDEO_ID
    const embedMatch = url.match(/embed\/([^?&]+)/);
    if (embedMatch) return embedMatch[1];

    // Handle youtu.be/VIDEO_ID
    const shortMatch = url.match(/youtu\.be\/([^?&]+)/);
    if (shortMatch) return shortMatch[1];

    return null;
  } catch (error) {
    console.error('Error extracting video ID:', error);
    return null;
  }
}

/**
 * Convert any YouTube URL to embed format
 * 
 * @param url - YouTube URL
 * @returns Embed URL with optimal parameters
 */
export function getYouTubeEmbedUrl(url: string): string {
  const videoId = extractVideoId(url);
  if (!videoId) return url;

  return `https://www.youtube.com/embed/${videoId}?enablejsapi=1&rel=0&modestbranding=1&playsinline=1`;
}
